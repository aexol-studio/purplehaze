<!DOCTYPE html><html>
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      
      <script type="module" src="./../page.js"></script><script type="module">
          const m = await import("./../page.js");
          const Component = m.default;
        
            import ReactDOM from 'https://cdn.skypack.dev/react-dom';
            ReactDOM.hydrate(Component({"content":{"content":"\nIn purplehaze page is a file that exports `default` function returning `html` string\n\n### Page must contain export default\n\nString returned in contained in file export default is generated via SSG phase.\n\n```js\nexport default () => {\n  return `\n    <div>Hello world</div>\n  `;\n};\n```\n\nTo have syntax coloring in html pleas install appropriate litelement extension for your IDE.\n\n### Functions\n\nIf file exports one of built in functions they will be used in SSG phase\n\n#### data, hydrate\n\nData function is used for so called data hydration in JSX frameworks and others also. It is used for Static Site rendered websites to be able to consume the data and work on client side. So you need to handle both data and hydrate functions yourself so they can be executed on output script.\n\n```tsx\n// Create your app\nexport const data = async () => {\n  const Fetch = Chain(ssg.config.graphql.pokemon.url, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n  return Fetch.query({\n    pokemons: [\n      { first: 151 },\n      {\n        number: true,\n        name: true,\n        image: true,\n        types: true,\n        resistant: true,\n        weaknesses: true,\n      },\n    ],\n  });\n};\n\ntype DataType = ReturnType<typeof data> extends Promise<infer R> ? R : never;\n\nexport const hydrate = async (staticData: DataType) =>\n  ReactDOM.hydrate(<PokemonApp response={staticData} />, document.body);\n\nexport default async (staticData: DataType) => {\n  const renderBody = document.createElement('div');\n  ReactDOM.render(<PokemonApp response={staticData} />, renderBody);\n  return renderBody.innerHTML;\n};\n```\n\n#### head\n\nEverything in this function will be put inside head tag. It also consumes data function.\n\n```js\nexport const head = () => `<title>Hello world!</div>`;\n```\n\n#### pages\n\nIf you export pages function you can generate multiple pages per one file. This is useful for example for single blog post page. It takes\n\n```tsx\nexport const data = async () => {\n  const Fetch = Chain(ssg.config.graphql.pokemon.url, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n  return Fetch.query({\n    pokemons: [\n      { first: 5 },\n      {\n        number: true,\n        name: true,\n        image: true,\n        types: true,\n        resistant: true,\n        weaknesses: true,\n      },\n    ],\n  });\n};\n\ntype DataType = ReturnType<typeof data> extends Promise<infer R> ? R : never;\n\nexport const pages = (staticData: DataType) => {\n  return staticData.pokemons?.map((p) => {\n    const renderBody = document.createElement('div');\n    ReactDOM.render(<PokemonApp {...p} />, renderBody);\n    return {\n      slug: p.name?.split(' ')[0],\n      body: renderBody.innerHTML,\n      data: p,\n      head: html`\n        <title>${p.name || ''}</title>\n        <link href=\"../index.css\" rel=\"stylesheet\" type=\"text/css\" />\n      `,\n    };\n  });\n};\n```\n","data":{"title":"Pages","link":"pages","order":1},"excerpt":""},"routes":[{"title":"Pages","link":"pages","order":1},{"title":"Routes","link":"routes","order":1.1},{"title":"Import from URL","link":"import-from-url","order":2},{"link":"configuration","title":"Configuration","order":3},{"link":"graphql","title":"GraphQL","order":4},{"title":"Markdown","link":"markdown","order":5},{"link":"env-variables","title":"Environment Variables","order":6},{"link":"react","title":"React","order":6},{"link":"changelog","title":"Changelog","order":99}],"activeRoute":"pages","prefix":"/purplehaze","version":"0.0.8"}),document.body)
      </script>

            <link
              rel="stylesheet"
              href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/styles/github-dark.min.css"
            />
            <link rel="stylesheet" href="../tw.css" />
            <title>Purple haze docs</title>
          
    </head>
    <body>
      <div class="h-full flex flex-col"><div class="w-full sm:flex hidden px-10 border-b border-purple-200 items-center"><a class="block py-4 text-xl logo font-black" href="/purplehaze/">Purple haze</a><span class="text-gray-400 block ml-2 text-md mt-1">Bundler that puffs in the browser</span><span class="ml-auto mr-2 text-gray-500">0.0.8</span><a href="https://github.com/aexol-studio/purplehaze" class="text-purple-500" title="Github repository"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></div><div class="flex w-full flex-1 overflow-hidden"><div class="absolute sm:hidden block cursor-pointer top-6 right-6"><div class="h-2 w-10 bg-purple-500 mb-2 rounded"></div><div class="h-2 w-10 bg-purple-500 mb-2 rounded"></div><div class="h-2 w-10 bg-purple-500 mb-2 rounded"></div></div><div class="py-6 px-10 w-80 sm:block hidden  border-r border-purple-200"><a class="transition-all block py-4 text-md font-medium text-purple-600" href="/purplehaze/page/pages.html">Pages</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/routes.html">Routes</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/import-from-url.html">Import from URL</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/configuration.html">Configuration</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/graphql.html">GraphQL</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/markdown.html">Markdown</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/env-variables.html">Environment Variables</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/react.html">React</a><a class="transition-all block py-4 text-md font-medium text-gray-600 hover:text-purple-600" href="/purplehaze/page/changelog.html">Changelog</a></div><div class="container mx-auto px-20 py-6 pb-20 h-full overflow-auto"><div class="prose prose-lg"><p>In purplehaze page is a file that exports <code>default</code> function returning <code>html</code> string</p>
<h3>Page must contain export default</h3>
<p>String returned in contained in file export default is generated via SSG phase.</p>
<pre><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
    &lt;div&gt;Hello world&lt;/div&gt;
  `</span>;
};
</code></pre>
<p>To have syntax coloring in html pleas install appropriate litelement extension for your IDE.</p>
<h3>Functions</h3>
<p>If file exports one of built in functions they will be used in SSG phase</p>
<h4>data, hydrate</h4>
<p>Data function is used for so called data hydration in JSX frameworks and others also. It is used for Static Site rendered websites to be able to consume the data and work on client side. So you need to handle both data and hydrate functions yourself so they can be executed on output script.</p>
<pre><code class="language-tsx"><span class="hljs-comment">// Create your app</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">data</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Fetch</span> = <span class="hljs-title class_">Chain</span>(ssg.<span class="hljs-property">config</span>.<span class="hljs-property">graphql</span>.<span class="hljs-property">pokemon</span>.<span class="hljs-property">url</span>, {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
  });
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Fetch</span>.<span class="hljs-title function_">query</span>({
    <span class="hljs-attr">pokemons</span>: [
      { <span class="hljs-attr">first</span>: <span class="hljs-number">151</span> },
      {
        <span class="hljs-attr">number</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">types</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">resistant</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">weaknesses</span>: <span class="hljs-literal">true</span>,
      },
    ],
  });
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">DataType</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> data&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer R&gt; ? R : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">hydrate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">staticData: DataType</span>) =&gt;
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">hydrate</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PokemonApp</span> <span class="hljs-attr">response</span>=<span class="hljs-string">{staticData}</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> (<span class="hljs-attr">staticData</span>: <span class="hljs-title class_">DataType</span>) =&gt; {
  <span class="hljs-keyword">const</span> renderBody = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PokemonApp</span> <span class="hljs-attr">response</span>=<span class="hljs-string">{staticData}</span> /&gt;</span></span>, renderBody);
  <span class="hljs-keyword">return</span> renderBody.<span class="hljs-property">innerHTML</span>;
};
</code></pre>
<h4>head</h4>
<p>Everything in this function will be put inside head tag. It also consumes data function.</p>
<pre><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">head</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-string">`&lt;title&gt;Hello world!&lt;/div&gt;`</span>;
</code></pre>
<h4>pages</h4>
<p>If you export pages function you can generate multiple pages per one file. This is useful for example for single blog post page. It takes</p>
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">data</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Fetch</span> = <span class="hljs-title class_">Chain</span>(ssg.<span class="hljs-property">config</span>.<span class="hljs-property">graphql</span>.<span class="hljs-property">pokemon</span>.<span class="hljs-property">url</span>, {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
  });
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Fetch</span>.<span class="hljs-title function_">query</span>({
    <span class="hljs-attr">pokemons</span>: [
      { <span class="hljs-attr">first</span>: <span class="hljs-number">5</span> },
      {
        <span class="hljs-attr">number</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">types</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">resistant</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">weaknesses</span>: <span class="hljs-literal">true</span>,
      },
    ],
  });
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">DataType</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> data&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer R&gt; ? R : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">pages</span> = (<span class="hljs-params">staticData: DataType</span>) =&gt; {
  <span class="hljs-keyword">return</span> staticData.<span class="hljs-property">pokemons</span>?.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> renderBody = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PokemonApp</span> {<span class="hljs-attr">...p</span>} /&gt;</span></span>, renderBody);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">slug</span>: p.<span class="hljs-property">name</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)[<span class="hljs-number">0</span>],
      <span class="hljs-attr">body</span>: renderBody.<span class="hljs-property">innerHTML</span>,
      <span class="hljs-attr">data</span>: p,
      <span class="hljs-attr">head</span>: html`<span class="language-xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span></span><span class="hljs-subst">${p.name || <span class="hljs-string">''</span>}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../index.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> /&gt;</span>
      `</span>,
    };
  });
};
</code></pre>
</div></div></div></div>
    </body>
  </html>